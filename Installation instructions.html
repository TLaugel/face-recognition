
<!-- saved from url=(0080)http://researchers.lille.inria.fr/~calandri/ta/graphs/td2_inst_instructions.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="robots" content="noindex">
        <title>Daniele Calandriello - PhD student</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="http://researchers.lille.inria.fr/~calandri/default.css">
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Droid%20Sans">
    <style type="text/css"></style></head>
    <body id="page-teaching">
        <nav id="nav-bar">
            <ul>
                <li id="nav-home"><a href="http://researchers.lille.inria.fr/~calandri/index.html">Home</a></li>
                <li id="nav-teaching"><a href="http://researchers.lille.inria.fr/~calandri/teaching.html">Teaching</a></li>
                <li id="nav-publications"><a href="http://researchers.lille.inria.fr/~calandri/publications.html">Publications</a></li>
                <li id="nav-contact"><a href="http://researchers.lille.inria.fr/~calandri/contact.html">Contact</a></li>
            </ul>
        </nav>
        <section id="main">
            <article>
                <h2 class="article-title">OpenCV installation instructions</h2><br>
                [<a href="http://researchers.lille.inria.fr/~calandri/ta/graphs/td2_inst_instructions.html#windoze">Windows</a>][<a href="http://researchers.lille.inria.fr/~calandri/ta/graphs/td2_inst_instructions.html#binux">GNU/Linux</a>][<a href="http://researchers.lille.inria.fr/~calandri/ta/graphs/td2_inst_instructions.html#expensive_fruit">Mac</a>]
            </article>
            <article id="windoze">
	            <header>
                    <h2 class="article-title">OpenCV installation instructions - Windows</h2>
		            <p class="article-info">
                        Tested on Windows 7
		            </p>
	            </header>
	            <p class="justify">

                <table class="instrtable">
                <tbody><tr><td><input type="checkbox"></td><td>
                Uninstall the Microsoft Visual C++ 2010 redistributable packages (both x86 as well as x64) from “Control Panel” &gt; “Programs and Features”.
                <br>
                <br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Install the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=8279">Windows SDK 7.1</a>. During installation, under the "Installation Options" menu, UNCHECK the "Visual C++ Compilers" and "Microsoft Visual C++ 2010" components.
                <br>
                <br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Apply this <a href="http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=4422">SDK 7.1 update</a>
                <br>
                <br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Reinstall the Microsoft Visual C++ 2010 redistributable packages:
                [<a href="http://www.microsoft.com/en-us/download/details.aspx?id=14632">x64</a>]
                [<a href="http://www.microsoft.com/en-us/download/details.aspx?id=5555">x86</a>]
                <br>
                <br>


                </td></tr><tr><td><input type="checkbox"></td><td>
                Open matlab and run
                <br><code><br>
                mex -setup
                <br></code><br>
                to initialize the compiler
                <br>
                <br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Download and install <a href="http://opencv.org/downloads.html">OpenCV</a>. Version 2.4.10 or 2.4.9 are ok.
                <br>
                <br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                        Download and extract the matlab bindings <a href="https://github.com/kyamagu/mexopencv/archive/master.zip">mexopencv</a>.
                <br>
                <br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Add to Matlab path "C:\opencv\build\x64(or x86)\v10", or 11 or 12 depending on your version of Microsoft Visual. If you followed this instructions and installed VC++10, choose v10.
                <br><code><br>
                    addpath('C:\opencv\build\{x64 or x86}\{v10,v11,v12}')
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                        Navigate to the mexopencv folder and compile the mex extensions. The <code>opencv</code> option should point to your OpenCV installation folder
                <br><code><br>
                mexopencv.make('opencv_path', 'c:\your\path\to\opencv\build')
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                        If you get an error concerning a missing <code>.h</code> file in <code>INCLUDE</code>, add <a href="http://researchers.lille.inria.fr/~calandri/ta/graphs/ammintrin.h"><code>ammintrin.h</code></a> in <code>C:\Program Files (x86)\Microsoft Visual Studio {10.0,11.0,12.0}\VC\INCLUDE\</code> and retry
                <br><code><br>
                mexopencv.make('opencv_path', 'c:\your\path\to\opencv\build')
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Try to open an interface to your webcam with
                <br><code><br>
                    cap = cv.VideoCapture;<br>
                    pause(3);
                <br></code><br>
                The pause is there to allow time for the camera to activate,
                and there might be problems if the wait is too short.

                </td></tr><tr><td><input type="checkbox"></td><td>
                Now try to read an image from the camera
                <br><code><br>
                    f = imshow(cap.read);
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Wait a few seconds for the image to show up on the newly opened
                window. Especially if your webcam has a high resolution, this
                might take a few seconds. Now try to capture a stream of frames.

                <br><code><br>
                    for t = 1:300; set(f,'CData', cap.read()); pause(1/30); end
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                If everything went well, you can now register all of your
                Youtube vlogs using matlab. Since later you want to play them
                again, try also the next snippet

                <br><code><br>
                cap = cv.VideoCapture('/path/to/some/video/file.avi')<br>
                f = imshow(cap.read);<br>
                for t = 1:300; set(f,'CData', cap.read()); pause(1/30); end
                <br></code><br>

                Two details are particularly important. A video file is usually
                composed of two parts: container and encoding. In our case,
                the container has to be .avi (OpenCV only open those).
                The encoding can be anything that the ffmpeg installation on
                your machine can handle (at least in theory). Common codecs
                that are found on most machines are H.264, MPEG4 part 2.

                </td></tr><tr><td><input type="checkbox"></td><td>
                If you can see the video playing, congratulations, you have
                properly installed the library.
                </td></tr>


                
                </tbody></table>


	            </p>
            </article>
            <article id="binux">
	            <header>
                    <h2 class="article-title">OpenCV installation instructions - GNU/Linux</h2>
		            <p class="article-info">
                        Tested on debian/ubuntu
		            </p>
	            </header>
	            <p class="justify">
                
                <table class="instrtable">
                <tbody><tr><td><input type="checkbox"></td><td>
                Install the development libraries, git and the necessary compilation tools
                <br><code><br>
				    sudo apt-get install git libopencv-dev make build-essential
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Download the mex files to interface with matlab
                <br><code><br>
                    git clone https://github.com/kyamagu/mexopencv.git
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Build the mex files. MATLABDIR should point to your
                installation folder of matlab. -j n should correspond to
                the number of CPUs you have.
                <br><code><br>
                    cd mexopencv<br>
                    bash utils/remove_nonfree.sh<br>
                    make MATLABDIR=/usr/local/MATLAB/R2011a/ -j 4
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Now we need to open matlab. Depending on your installation,
                there might be problems with the bundled libraries. A reasonably
                safe invocation is
                <br><code><br>
                    LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libstdc++.so.6:/usr/lib/x86_64-linux-gnu/libfreetype.so.6 /usr/local/MATLAB/R2011a/bin/matlab
                <br></code><br>

                Also if matlab complains about /lib64/libc.so.6
                missing, you can resolve by linking
                <br><code><br>
                    sudo ln -s /lib/x86_64-linux-gnu/libc.so.6 /lib64/libc.so.6
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Now navigate to the mexopencv folder and
                add it to the path
                <br><code><br>
                    addpath(genpath(pwd))
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Try to open an interface to your webcam with
                <br><code><br>
                    cap = cv.VideoCapture;<br>
                    pause(3);
                <br></code><br>
                The pause is there to allow time for the camera to activate,
                and there might be problems if the wait is too short.


                </td></tr><tr><td><input type="checkbox"></td><td>
                There is a possibility that this error will appear
                <br><code><pre>??? Invalid MEX-file
'/home/ubuntu/mexopencv/+cv/private/VideoCapture_.mexa64':
libraw1394.so.8: cannot open shared object file: No such file or
directory
Error in ==&gt; VideoCapture&gt;VideoCapture.VideoCapture at 46
    this.id = VideoCapture_(filename);</pre></code>

                If this happens, create a link to make matlab happy
                <br><code><br>
                    sudo ln -s /usr/lib/x86_64-linux-gnu/libraw1394.so /usr/local/MATLAB/R2011a/sys/os/glnxa64/libraw1394.so.8
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Now try to read an image from the camera
                <br><code><br>
                    f = imshow(cap.read);
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Wait a few seconds for the image to show up on the newly opened
                window. Especially if your webcam has a high resolution, this
                might take a few seconds. Now try to capture a stream of frames.

                <br><code><br>
                    for t = 1:300; set(f,'CData', cap.read()); pause(1/30); end
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                If everything went well, you can now register all of your
                Youtube vlogs using matlab. Since later you want to play them
                again, try also the next snippet

                <br><code><br>
                cap = cv.VideoCapture('/path/to/some/video/file.avi')<br>
                f = imshow(cap.read);<br>
                for t = 1:300; set(f,'CData', cap.read()); pause(1/30); end
                <br></code><br>

                Two details are particularly important. A video file is usually
                composed of two parts: container and encoding. In our case,
                the container has to be .avi (OpenCV only open those).
                The encoding can be anything that the ffmpeg installation on
                your machine can handle (at least in theory). Common codecs
                that are found on most machines are H.264, MPEG4 part 2.

                </td></tr><tr><td><input type="checkbox"></td><td>
                If you can see the video playing, congratulations, you have
                properly installed the library.
                </td></tr>
                </tbody></table>
            </p>
            </article>
            <article id="expensive_fruit">
	            <header>
                    <h2 class="article-title">OpenCV installation instructions - Mac</h2>
		            <p class="article-info">
                        Tested on the internet
		            </p>
	            </header>
	            <p class="justify">
                <table class="instrtable">
                <tbody><tr><td><input type="checkbox"></td><td>
                        Install the
                        <a href="https://developer.apple.com/xcode/downloads/">XCode SDK </a>
                        to have access to the necessary compilation tools. This
                        <a href="https://www.macports.org/guide/#installing.xcode"> guide </a>
                        can provide some help.
                        <br>
                        <br>
                </td></tr><tr><td><input type="checkbox"></td><td>
                        Install the <code>port</code> package manager from
                        the <a href="https://www.macports.org/guide/#installing.macports"> MacPorts website. </a>
                        <br>
                        <br>
                </td></tr><tr><td><input type="checkbox"></td><td>
                        Open a terminal, and type
                    <br><code><br>
                        port search opencv
                    <br></code><br>
                    to find the exact name of the Opencv installation script.
                    You can then run
                    <br><code><br>
                        sudo port install opencv
                    <br></code><br>
                </td></tr><tr><td><input type="checkbox"></td><td>
                        Download and extract the matlab bindings <a href="https://github.com/kyamagu/mexopencv/archive/master.zip">mexopencv</a>.
                <br>
                <br>
                </td></tr><tr><td><input type="checkbox"></td><td>
                Open a terminal, navigate to the mexopencv folder and build the mex files. MATLABDIR should point to your
                installation folder of matlab. -j n should correspond to
                the number of CPUs you have.
                <br><code><br>
                    cd mexopencv<br>
                    bash utils/remove_nonfree.sh<br>
                    make MATLABDIR=/Applications/MATLAB_R2014b.app/ -j 4
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Now open matlab and navigate to the mexopencv folder,
                add it to the path
                <br><code><br>
                    addpath(genpath(pwd))
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Try to open an interface to your webcam with
                <br><code><br>
                    cap = cv.VideoCapture;<br>
                    pause(3);
                <br></code><br>
                The pause is there to allow time for the camera to activate,
                and there might be problems if the wait is too short.
                <br><br>
                </td></tr><tr><td><input type="checkbox"></td><td>
                It is possible that the newly installed OpenCV libraries
                will not work well with matlab pre-installed ones (if you
                have a new enough matlab version that contains OpenCV). In
                this case <code>DYLD_LIBRARY_PATH</code> would solve the
                situation in most cases, but it seems to not work well on OS X.
                Instead, force matlab to load the right libraries with
                <br><code><br>
                    DYLD_INSERT_LIBRARIES=/opt/local/lib/libfreetype.6.dylib:/opt/local/lib/libtiff.5.dylib:/opt/local/lib/libopencv_calib3d.2.4.dylib:/opt/local/lib/libopencv_contrib.2.4.dylib:/opt/local/lib/libopencv_core.2.4.dylib:/opt/local/lib/libopencv_features2d.2.4.dylib:/opt/local/lib/libopencv_flann.2.4.dylib:/opt/local/lib/libopencv_gpu.2.4.dylib:/opt/local/lib/libopencv_highgui.2.4.dylib:/opt/local/lib/libopencv_imgproc.2.4.dylib:/opt/local/lib/libopencv_legacy.2.4.dylib:/opt/local/lib/libopencv_ml.2.4.dylib:/opt/local/lib/libopencv_nonfree.2.4.dylib:/opt/local/lib/libopencv_objdetect.2.4.dylib:/opt/local/lib/libopencv_photo.2.4.dylib:/opt/local/lib/libopencv_stitching.2.4.dylib:/opt/local/lib/libopencv_video.2.4.dylib:/opt/local/lib/libopencv_videostab.2.4.dylib /Applications/MATLAB_R2014a.app/bin/matlab 
                <br></code><br>
                This is a single long line. You can try to export the
                <code>DYLD_INSERT_LIBRARIES</code> variables to
                have a shorter command.<br><br>
                
                </td></tr><tr><td><input type="checkbox"></td><td>
                Now try to read an image from the camera
                <br><code><br>
                    f = imshow(cap.read);
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                Wait a few seconds for the image to show up on the newly opened
                window. Especially if your webcam has a high resolution, this
                might take a few seconds. Now try to capture a stream of frames.

                <br><code><br>
                    for t = 1:300; set(f,'CData', cap.read()); pause(1/30); end
                <br></code><br>

                </td></tr><tr><td><input type="checkbox"></td><td>
                If everything went well, you can now register all of your
                Youtube vlogs using matlab. Since later you want to play them
                again, try also the next snippet

                <br><code><br>
                cap = cv.VideoCapture('/path/to/some/video/file.avi')<br>
                f = imshow(cap.read);<br>
                for t = 1:300; set(f,'CData', cap.read()); pause(1/30); end
                <br></code><br>

                Two details are particularly important. A video file is usually
                composed of two parts: container and encoding. In our case,
                the container has to be .avi (OpenCV only open those).
                The encoding can be anything that the ffmpeg installation on
                your machine can handle (at least in theory). Common codecs
                that are found on most machines are H.264, MPEG4 part 2.

                </td></tr><tr><td><input type="checkbox"></td><td>
                If you can see the video playing, congratulations, you have
                properly installed the library.
                </td></tr>
                </tbody></table>
            </p>
            </article>
        <!--<footer><nav><a href="#nav-bar">↑ Back to top</a></footer>-->
        </section>
    


</body></html>